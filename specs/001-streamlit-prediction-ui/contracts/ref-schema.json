{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ReferenceData",
  "description": "JSON schema for dropdown options reference data (ref_options.json)",
  "type": "object",
  "required": [
    "dep", "lum", "atm", "catr", "agg", "int", "circ", "col",
    "vma_bucket", "catv_family_4", "manv_mode", "driver_age_bucket",
    "choc_mode", "driver_trajet_family", "minute"
  ],
  "properties": {
    "dep": {
      "type": "array",
      "description": "Département codes (107 values)",
      "minItems": 107,
      "maxItems": 107,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "string", "pattern": "^[0-9]{2}[AB]?|97[1-8]|98[6-8]$"},
          "label": {"type": "string"}
        }
      }
    },
    "lum": {
      "type": "array",
      "description": "Conditions d'éclairage (5 values)",
      "minItems": 5,
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [1, 2, 3, 4, 5]},
          "label": {"type": "string"}
        }
      }
    },
    "atm": {
      "type": "array",
      "description": "Conditions atmosphériques (10 values including -1)",
      "minItems": 10,
      "maxItems": 10,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [-1, 1, 2, 3, 4, 5, 6, 7, 8, 9]},
          "label": {"type": "string"}
        }
      }
    },
    "catr": {
      "type": "array",
      "description": "Catégorie de route (8 values)",
      "minItems": 8,
      "maxItems": 8,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [1, 2, 3, 4, 5, 6, 7, 9]},
          "label": {"type": "string"}
        }
      }
    },
    "agg": {
      "type": "array",
      "description": "Agglomération (2 values)",
      "minItems": 2,
      "maxItems": 2,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [1, 2]},
          "label": {"type": "string"}
        }
      }
    },
    "int": {
      "type": "array",
      "description": "Type d'intersection (9 values)",
      "minItems": 9,
      "maxItems": 9,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [1, 2, 3, 4, 5, 6, 7, 8, 9]},
          "label": {"type": "string"}
        }
      }
    },
    "circ": {
      "type": "array",
      "description": "Régime de circulation (5 values including -1)",
      "minItems": 5,
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [-1, 1, 2, 3, 4]},
          "label": {"type": "string"}
        }
      }
    },
    "col": {
      "type": "array",
      "description": "Type de collision (8 values including -1)",
      "minItems": 8,
      "maxItems": 8,
      "items": {
        "type": "object",
        "required": ["code", "label"],
          "properties": {
          "code": {"type": "integer", "enum": [-1, 1, 2, 3, 4, 5, 6, 7]},
          "label": {"type": "string"}
        }
      }
    },
    "vma_bucket": {
      "type": "array",
      "description": "Vitesse maximale autorisée (8 buckets)",
      "minItems": 8,
      "maxItems": 8,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {
            "type": "string",
            "enum": ["<=30", "31-50", "51-80", "81-90", "91-110", "111-130", ">130", "inconnue"]
          },
          "label": {"type": "string"}
        }
      }
    },
    "catv_family_4": {
      "type": "array",
      "description": "Famille de véhicule (4 classes)",
      "minItems": 4,
      "maxItems": 4,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {
            "type": "string",
            "enum": ["voitures_utilitaires", "2rm_3rm", "lourds_tc_agri_autres", "vulnerables"]
          },
          "label": {"type": "string"}
        }
      }
    },
    "manv_mode": {
      "type": "array",
      "description": "Manœuvre (28 values: -1, 0-26)",
      "minItems": 28,
      "maxItems": 28,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {
            "type": "integer",
            "minimum": -1,
            "maximum": 26
          },
          "label": {"type": "string"}
        }
      }
    },
    "driver_age_bucket": {
      "type": "array",
      "description": "Classe d'âge conducteur (9 buckets)",
      "minItems": 9,
      "maxItems": 9,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {
            "type": "string",
            "enum": ["<18", "18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75+", "unknown"]
          },
          "label": {"type": "string"}
        }
      }
    },
    "choc_mode": {
      "type": "array",
      "description": "Point de choc (11 values including -1 and 0)",
      "minItems": 11,
      "maxItems": 11,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {"type": "integer", "enum": [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]},
          "label": {"type": "string"}
        }
      }
    },
    "driver_trajet_family": {
      "type": "array",
      "description": "Famille de trajet conducteur (7 values)",
      "minItems": 7,
      "maxItems": 7,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {
            "type": "string",
            "enum": ["trajet_1", "trajet_2", "trajet_3", "trajet_4", "trajet_5", "trajet_9", "unknown"]
          },
          "label": {"type": "string"}
        }
      }
    },
    "minute": {
      "type": "array",
      "description": "Minute (61 values: -1 and 0-59)",
      "minItems": 61,
      "maxItems": 61,
      "items": {
        "type": "object",
        "required": ["code", "label"],
        "properties": {
          "code": {
            "type": "integer",
            "minimum": -1,
            "maximum": 59
          },
          "label": {"type": "string"}
        }
      }
    }
  },
  "additionalProperties": false
}
